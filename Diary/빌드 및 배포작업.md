---
keyword : Java, Spring, EC2, build, ubuntu, 배포
class : Programming
---


### 기초작업 및 8080 빼기

- ### AWS EC2 작업
    
    [AWS](https://ap-northeast-2.console.aws.amazon.com/ec2/v2/home?region=ap-northeast-2#Instances:)
    
    인스턴스 클릭 > 보안 > 보안그룹 > 인바운드규칙편집
    
    HTTP 80번포트 위치무관 / 사용자지정 8080번포트 위치무관
    
- ### GIT BASH 작업(우분투 접속)
    
    ssh -i [keypair] ubuntu@[ipv4주소]
    
    ssh -i /c/Users/User/Desktop/sparta/g4dalcom.pem [ubuntu@54.180.83.179](mailto:ubuntu@54.180.83.179)
    
    keyfinger 어쩌구 나오면 yes
    
    mkdir 폴더이름 > make directory 폴더 생성
    
    ls > 리스트
    
    cd 폴더이름 > 폴더 들어가기
    
    clear > 화면 비우기
    
    exit > 종료
    
- ### 인텔리제이에서 빌드
    
    오른쪽 Gradle > Tasks > Build > build > jar 파일 생성됨
    
- ### FileZilla 작업
    
    사이트관리자 > 호스트(EC2 IP_퍼블릭IPv4), 사용자 ubuntu, 키 파일 업로드 > 연결 > 파일 옮기기
    
- ### 우분투 작업
    
    java -jar jar경로이름
    
- ### 포트포워딩
    
    sudo iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8080
    
    80번으로 들어온 것을 8080번으로 꽂아달라고 명령한 거임
    

---

### 접속하기 & SSH 끈 후에도 접속 가능하게 하기

nohup java -jar hanghae-board-project-0.0.1-SNAPSHOT.jar &

nohup: ignoring input and appending output to 'nohup.out’ 뜨면 완료

---

### 접속 끊기

우분투 접속 > ps -ef | grep java > kill -9 숫자(ubuntu 옆 숫자)

---

### 도메인 붙이기(가비아)

My가비아 > 관리 > DNS정보의 도메인연결 설정

레코드 수정 > 타입 = A, 호스트 = @, IP = EC2 IP > 확인