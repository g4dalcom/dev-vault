# 싱글톤 패턴(singleton pattern)

- 객체의 인스턴스가 오로지 한 개만 생성되도록 설계하는 패턴으로 private을 이용해 외부에서 인스턴스를 생성하지 못하도록 막고, static을 이용해 어느 영역에서든 접근이 가능하도록 설계한다.
- 객체가 생성된 이후에는 호출이 되었을 때 최초로 생성된 인스턴스를 사용하기 때문에 메모리 낭비를 막을 수 있다.
- 싱글톤 패턴은 구현 코드가 많고 내부속성 변경이 어려운 등 유연성이 떨어지며 OCP(개방폐쇄원칙, 기존의 코드를 변경하지 않으면서 기능을 추가할 수 있어야 한다)와 DIP(의존역전원칙)을 위반하기 쉬운데 이러한 단점을 해결해주는 것이 스프링 컨테이너이다.
- 스프링 컨테이너는 싱글톤 패턴을 적용하지 않아도 객체 인스턴스를 싱글톤으로 관리하는데 이 때 객체 인스턴스를 하나로 공유하기 때문에 객체 상태가 바뀌지 않도록 무결(statefuless)하게 유지해야 한다.

### DIP 의존역전 원칙이란
- 변하기 쉬운 것에 의존하지 말고 변하지 않을 가능성이 높은 상위 클래스나 상위 인터페이스, 추상화된 클래스에 의존하라는 원칙이다.
- 자동차가 구체적인 스노우 타이어라는 클래스에 의존하는 것보다 추상적인 타이어 인터페이스에 의존하게 함으로써 객체간 관계를 느슨하게 할 수 있다.


# 트랜잭션(Transaction)
- DB의 상태를 변화시키는 하나의 작업단위이다.
- 거래 시스템을 예로 들면, 구매자의 계좌에서 10,000원이 출금되고 판매자의 계좌에 10,000원이 입금되는 과정을 거치는데 구매자의 계좌에서 출금이 일어난 이후 판매자 계좌에 입금이 되기 전에 오류가 생기게 된다면 데이터의 무결성이 깨지기 때문에 출금과 입금을 하나의 작업단위, 트랜잭션으로 묶어서 거래가 모두 완전하게 끝나면 commit 연산을 하고 중간에 오류가 발생하면 거래 시작 전으로 되돌리는 rollback 연산을 하여 거래의 무결성이 보장한다.
- 스프링 AOP와 Transaction은 대상 객체의 기능을 대신 수행하는 대리 객체인 Proxy로 동작하는데 이 때문에 외부접근이 불가능한 private 접근자나 동일한 클래스 내에서의 호출은 @Transactional이 동작하지 않는다는 특징이 있다.

---
### 연관자료
- [싱글톤 패턴의 개념 및 예제](https://hoestory.tistory.com/8)
- [스프링 핵심원리-싱글톤패턴](https://velog.io/@jaeeunxo1/spring-singleton)
- [DIP](https://huisam.tistory.com/entry/DIP)
- [의존성 역전 원칙 - DIP](https://yoongrammer.tistory.com/100)
- [Transaction이란](https://cocoon1787.tistory.com/808)
- [프록시 패턴](https://zzang9ha.tistory.com/378)
- [AOP와 프록시 패턴](https://dong-co.tistory.com/84)