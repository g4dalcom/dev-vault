# 자바스크립트의 변수 타입

- 자바스크립트의 변수는 크게 원시 타입(Primitive type)과 참조 타입(Reference type)으로 나누어져 있습니다.
- 타입별로 불변성 여부와 저장 방식 등이 다르기 때문에 잘 알아두어야 합니다!

## 원시 타입

- 원시 타입에는 **string, number, boolean, undefined, null, symbol** 이 있습니다.
- 변수에 원시 타입이 할당되면 **스택 메모리**에 고정 크기(8byte)로 값을 저장하고 변수가 직접 값을 가리키게 됩니다.
- 또한 원시 값을 갖는 변수를 다른 변수에 할당하면 원시값 자체가 복사되어서 원본이 변화되어도 사본에는 영향이 없게 됩니다.
- 원시 타입은 값이 변하지 않는 **불변성**을 갖기 때문에 변수의 값을 바꾸는 것은 새로운 메모리에 재할당된 값이 저장되고 변수가 새로운 값을 가리키게 됩니다.
- 이 때 이전에 있던 값은 가비지 컬렉터에 의해 삭제가 되겠죠!

## 참조 타입

- 원시 타입을 제외한 **객체, 배열, 함수 등**은 참조 타입입니다.
- Object는 **힙 메모리** 공간에 저장이 되며 해당 힙 메모리의 주소값을 **스택 메모리**에 저장을 합니다. 값에 접근을 할 때는 스택 메모리에 저장된 주소를 이용하게 됩니다.
- 참조값을 갖는 변수를 다른 변수에 할당하면 주솟값이 복사되어 전달됩니다. 
- 값을 변화시키면 스택 메모리에 있는 주소값을 그대로 유지한 채 힙 메모리에 있는 데이터의 값을 수정하는 **변동성(mutable)** 을 갖기 때문에 얕은 복사를 했을 경우 복사를 한 변수들도 영향을 받게 됩니다.

### (참고) 배열 복사

- 배열을 복사하는 방법은 **slice()** 메서드를 사용하는 방법과 **spread 문법**을 사용하는 방법이 있습니다.
- 복사한 배열은 같은 값을 가지고 있어도 참조하는 주소는 다르기 때문에 서로 영향을 받지 않습니다.

### (참고) 객체 복사

- 객체를 복사하는 방법은 **Object.assign()** 과 **spread 문법**이 있습니다.
- 이 때에도 배열 복사와 마찬가지로 서로 다른 주솟값을 갖게 되지만 **참조 자료형 내부에 참조 자료형이 중첩된 구조**에서는 한 단계까지만 복사가 되는데 이것을 얕은 복사라고 합니다.
- 참조 자료형 내부의 참조 자료형까지 모두 복사하는 것을 **깊은 복사**라고 합니다.
- 깊은 복사를 하려면 lodash와 같은 외부 라이브러리를 사용하거나 **JSON.stringfy()** 로 중첩된 참조 자료형을 문자열 형태로 반환하고 반환된 값을 다시 **JSON.parse()** 로 객체 변환을 하는 방법이 있습니다.

---
### 관련 자료

- [\[Java Script\] 원시타입과 참조타입](https://velog.io/@nomadhash/Java-Script-%EA%B9%8A%EC%9D%80-%EB%B3%B5%EC%82%AC%EC%99%80-%EC%96%95%EC%9D%80-%EB%B3%B5%EC%82%AC)
- [자바스크립트 원시(primitive)타입 vs 참조(reference)타입](https://hwani.dev/js-primitive-reference-types/)
